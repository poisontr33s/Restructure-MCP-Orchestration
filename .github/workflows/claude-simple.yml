name: Claude Simple - Natural Language Ready

on:
  issue_comment:
    types: [created]
  pull_request_review_comment:
    types: [created]
  issues:
    types: [opened]

jobs:
  claude-natural-language:
    if: contains(github.event.comment.body, '@claude') || contains(github.event.issue.body, '@claude')
    runs-on: ubuntu-latest
    permissions:
      contents: read
      issues: write
      pull-requests: write
    steps:
      - name: ğŸ§  Natural Language Claude Response
        uses: actions/github-script@v7
        with:
          script: |
            const { owner, repo, number } = context.issue || context.pull_request || {};
            const actor = context.actor;
            const eventType = context.eventName;
            
            // Natural language response for Claude collaboration
            const naturalLanguageResponse = `## ğŸ§  Claude Natural Language Mode Activated

            Hello @${actor}! ğŸ‘‹

            I see you've called for Claude assistance! While our advanced Claude Code Action is experiencing 
            some authentication challenges (the digital equivalent of a locked door), I'm here to provide 
            **natural language collaboration** using the Anti-Template Policy.

            ### ğŸ¯ How We Can Collaborate

            **Method 1 - Direct Conversation**: Continue our discussion right here using natural language
            **Method 2 - Rich Issue Templates**: Use our .md or .nlp templates for detailed scenarios  
            **Method 3 - Strategic Guidance**: I'll provide comprehensive analysis through comments

            ### ğŸš€ What You Can Do Right Now

            1. **Tell me your story** - Describe what you're trying to accomplish in natural language
            2. **Share your challenges** - What obstacles or questions do you have?
            3. **Express your vision** - What would success look like?

            ### ğŸ› ï¸ Available Resources

            - **Natural Language Templates**: Use \`.md\` or \`.nlp\` formats for rich storytelling
            - **Anti-Template Policy**: Embrace conversational problem-solving over rigid forms
            - **Strategic Collaboration**: Renaissance-level analysis and recommendations

            ### ğŸ“ Template Options

            Choose your preferred collaboration style:
            
            - **Markdown Template** (\`.md\`): Structured yet flexible natural language
            - **Natural Language Processing** (\`.nlp\`): Advanced conversational AI format
            - **Free-form Discussion**: Just continue chatting naturally!

            ### ğŸ”§ Technical Note

            The Claude Code Action authentication will be resolved soon. In the meantime, this natural 
            language approach often provides even richer collaboration than automated responses!

            **Ready to collaborate?** Just reply with your thoughts, questions, or challenges. 
            No forms required - just authentic conversation!

            ---
            *ğŸ´â€â˜ ï¸ Anti-Template Policy in action: When templates fail, intelligence prevails!*
            `;

            // Post the natural language response
            if (number) {
              await github.rest.issues.createComment({
                owner,
                repo,
                issue_number: number,
                body: naturalLanguageResponse
              });
            }

            console.log('Natural language Claude collaboration activated! ğŸš€');

      - name: ğŸ“‹ Template Format Guidance
        if: contains(github.event.comment.body, 'template') || contains(github.event.comment.body, '.nlp') || contains(github.event.comment.body, '.md')
        uses: actions/github-script@v7
        with:
          script: |
            const { owner, repo, number } = context.issue || context.pull_request || {};
            
            const templateGuidance = `## ğŸ“ Template Format Options Available

            Great question about template formats! Here are your options:

            ### ğŸ—‚ï¸ Current Template Formats

            **1. Markdown Templates (.md)**
            - âœ… GitHub native support
            - âœ… Rich formatting with natural language
            - âœ… Easy to read and write
            - ğŸ“ Location: \`.github/ISSUE_TEMPLATE/natural-language.md\`

            **2. Natural Language Processing (.nlp)**  
            - âœ… Advanced AI collaboration format
            - âœ… Structured yet conversational
            - âœ… Metadata-rich for better processing
            - ğŸ“ Location: \`.github/ISSUE_TEMPLATE/natural-language.nlp\`

            **3. YAML Templates (.yml)**
            - âœ… GitHub's default format
            - âœ… Structured form-based input
            - âœ… Built-in validation
            - ğŸ“ Location: \`.github/ISSUE_TEMPLATE/natural-language.yml\`

            ### ğŸ¯ Recommendation

            **For Natural Language Processing**: Use **.nlp** files for maximum AI collaboration  
            **For Simplicity**: Use **.md** files for readable, flexible templates  
            **For Structure**: Keep **.yml** files for form-based inputs

            ### ğŸš€ How to Use Each Format

            **Markdown (.md)**: Just write natural language with optional structure
            **NLP (.nlp)**: Use our special NLP metadata blocks for enhanced AI processing
            **YAML (.yml)**: Traditional GitHub issue template format

            All formats support the **Anti-Template Policy** - choose what works best for your collaboration style!

            ---
            *ğŸ´â€â˜ ï¸ Captain Guthilda supports all template formats - diversity in unity!*
            `;

            if (number) {
              await github.rest.issues.createComment({
                owner,
                repo,
                issue_number: number,
                body: templateGuidance
              });
            }